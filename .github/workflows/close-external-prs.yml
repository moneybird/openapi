name: Auto-Close External PRs
on:
  pull_request_target:
    types: [opened]

jobs:
  close-and-comment:
    if: >
      github.event.pull_request.author_association != 'OWNER' &&
      github.event.pull_request.author_association != 'MEMBER' &&
      github.event.pull_request.author_association != 'COLLABORATOR'
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
      - name: Close Pull Request
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          PR_URL: ${{ github.event.pull_request.html_url }}
        run: |
          gh pr comment "$PR_URL" --body "Thank you for your interest! We are not currently accepting external Pull Requests directly on this repository. 
          
          If you have questions, suggestions, or improvements regarding the documentation, please reach out to us at support@moneybird.com instead. We appreciate your feedback!"
          
          gh pr close "$PR_URL"
